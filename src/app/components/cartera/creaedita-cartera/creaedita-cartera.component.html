<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Registrar Cartera</title>
</head>
<body>
  <div class="form-container">
    <h2>{{ edicion ? 'Editar Cartera' : 'Registrar Cartera' }}</h2>
  
    <form [formGroup]="form" class="cartera-form-container" (ngSubmit)="registrar()">
      <div class="form-row">
        
        <!-- Nombre -->
        <mat-form-field appearance="outline" class="form-column">
          <mat-label>Nombre</mat-label>
          <input matInput formControlName="nombre" placeholder="Ingrese nombre de la cartera" />
        </mat-form-field>
        <!-- Fecha de Descuento -->
        <mat-form-field appearance="outline" class="form-column">
          <mat-label>Fecha de Descuento</mat-label>
          <input matInput formControlName="fechaDescuento" [matDatepicker]="picker1" />
          <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
          <mat-datepicker #picker1></mat-datepicker>
        </mat-form-field>


      </div>

      <div class="form-row">
        <!-- Empresa -->
        <mat-form-field appearance="outline" class="form-column">
          <mat-label>Empresa</mat-label>
          <mat-select formControlName="empresa">
            <mat-option *ngFor="let empresa of listaEmpresas" [value]="empresa.idEmpresa">
              {{ empresa.nombre }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <!-- Moneda -->
        <mat-form-field appearance="outline" class="form-column">
          <mat-label>Moneda</mat-label>
          <mat-select formControlName="moneda">
            <mat-option *ngFor="let moneda of monedas" [value]="moneda.value">
              {{ moneda.viewValue }}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="obtenerControlCampo('moneda').hasError('required')">
            La moneda es obligatoria.
          </mat-error>
        </mat-form-field>
      </div>

      <div class="button-container">
        <button mat-raised-button color="primary" type="submit"  [disabled]="form.invalid"  routerLink="/cartera/listar_cartera_usuario" (click)="registrar()">
          {{ edicion ? 'Actualizar' : 'Registrar' }}
        </button>
        <button mat-button color="warn" type="button">Cancelar</button>
      </div>
    </form>
  </div>
</body>
</html>
